!function(t){class e{constructor(e,n){this.$this=e,this.settings=t.extend({},t.fn.polygonizr.defaults,n),this.canvasElement=document.createElement("canvas"),this.$this.append(this.canvasElement),this.ctx=this.canvasElement.getContext("2d"),this.m_nodeMovementDistance=this.settings.nodeMovementDistance;const s={EASING_LINEAR:"linear",EASING_EASEIN:"easeIn",EASING_EASEOUT:"easeOut",EASING_EASEINOUT:"easeInOut",EASING_ACCELERATE:"accelerateDecelerate",EASING_DESCENDING:"descendingEntrance"},o={MEDIAN_AXIS:"median",CENTER_AXIS:"center",LEFT_AXIS:"left",RIGHT_AXIS:"right"},i={COLORING_LINEAR:"linear",COLORING_RANDOM:"random"};function a(t,e,n,o,i){switch(t){case s.EASING_LINEAR:return e/i*(o-n)+n;case s.EASING_EASEIN:return e/=i,(o-n)*Math.pow(e,2)+n;case s.EASING_EASEOUT:return-(o-n)*(e/=i)*(e-2)+n;case s.EASING_EASEINOUT:return(e/=i/2)<1?(o-n)/2*Math.pow(e,2)+n:-(o-n)/2*((e-1)*(e-1-2)-1)+n;case s.EASING_ACCELERATE:return(e/=i/2)<1?(o-n)/2*Math.pow(e,3)+n:(o-n)/2*(Math.pow(e-2,3)+2)+n;case s.EASING_DESCENDING:return(e/=i/2)<1?(o-n)/Math.pow(e,3)+n:(o-n)/(Math.pow(e-2,3)+2)+n;default:return a(s.EASING_LINEAR,e,n,o,i)}}function r(t,e){return Math.sqrt(Math.pow(t.currentX-e.currentX,2)+Math.pow(t.currentY-e.currentY,2))}this.setupClusterNodes=function(){this.nodes=[];for(let t=0;t<this.settings.numberOfNodes+this.settings.numberOfUnconnectedNode;t++){let e={x:0,y:0,z:0};this.settings.randomizePolygonMeshNetworkFormation?(e.x=Math.random()*this.settings.canvasWidth,e.y=Math.random()*this.settings.canvasHeight):e=this.settings.specifyPolygonMeshNetworkFormation(t);let n=Math.acos(2*Math.random()-1);if(e.z=this.settings.node3dDepthDistance+this.settings.node3dDepthDistance*Math.cos(n),this.settings.nodeDotColor=Array.isArray(this.settings.nodeDotColor)?this.settings.nodeDotColor:new Array(this.settings.nodeDotColor),this.settings.nodeLineColor=Array.isArray(this.settings.nodeLineColor)?this.settings.nodeLineColor:new Array(this.settings.nodeLineColor),this.settings.nodeFillColor=Array.isArray(this.settings.nodeFillColor)?this.settings.nodeFillColor:new Array(this.settings.nodeFillColor),this.settings.nodeFillGradientColor=Array.isArray(this.settings.nodeFillGradientColor)?this.settings.nodeFillGradientColor:new Array(this.settings.nodeFillGradientColor),0==this.settings.nodeOverflow){let t=this.settings.nodeMovementDistance+this.settings.nodeDotSize,n=this.settings.canvasHeight-t,s=this.settings.canvasWidth-t;this.m_nodeMovementDistance=Math.min(Math.min(this.settings.nodeMovementDistance,s),Math.min(this.settings.nodeMovementDistance,n)),e.x=Math.floor(e.x+t>this.settings.canvasWidth?s:e.x),e.x=Math.floor(e.x-t<t?t:e.x),e.y=Math.floor(e.y+t>this.settings.canvasHeight?n:e.y),e.y=Math.floor(e.y-t<t?t:e.y)}this.nodes.push({currentX:e.x,originX:e.x,startX:e.x,targetX:e.x,currentY:e.y,originY:e.y,startY:e.x,targetY:e.y,originZ:e.z,zAlpha:1}),this.nodes[t].UnconnectedNode=this.settings.numberOfUnconnectedNode>t}for(let t=0;t<this.nodes.length;t++){let e=this.nodes[t],n=this.nodes;n=n.filter((function(t){return t!==e})),n.sort((function(t,n){return r(e,t)>r(e,n)?1:r(e,t)<r(e,n)?-1:0})),n=n.splice(0,this.settings.nodeRelations),e.Closest=n,e.nodeDotColor=this.settings.nodeDotColor[this.settings.nodeDotColoringSchema==i.COLORING_RANDOM?Math.floor(Math.random()*this.settings.nodeDotColor.length):t%this.settings.nodeDotColor.length],e.nodeLineColor=this.settings.nodeLineColor[this.settings.nodeLineColoringSchema==i.COLORING_RANDOM?Math.floor(Math.random()*this.settings.nodeLineColor.length):t%this.settings.nodeLineColor.length],e.nodeFillColor=this.settings.nodeFillColor[this.settings.nodeFillColoringSchema==i.COLORING_RANDOM?Math.floor(Math.random()*this.settings.nodeFillColor.length):t%this.settings.nodeFillColor.length],e.nodeFillGradientColor=this.settings.nodeFillGradientColor[this.settings.nodeFillGradientColoringSchema==i.COLORING_RANDOM?Math.floor(Math.random()*this.settings.nodeFillGradientColor.length):t%this.settings.nodeFillGradientColor.length],this.setAlphaLevel(e)}},this.Animator=function(t,e,n,i,r,l,h){function d(i){M||(M=i),E||(E=i);let a=Math.floor((i-M)/(1e3/n));if(v<a){v=a;let n=i-E;n<=g?(w&&(!function(){let e=[];for(let n in t.nodes){let s=t.calculateNewTargetPossition(t.nodes[n].originX),o=t.calculateNewTargetPossition(t.nodes[n].originY);t.nodes[n].targetX=s,t.nodes[n].targetY=o,t.nodes[n].startX=t.nodes[n].currentX,t.nodes[n].startY=t.nodes[n].currentY,t.nodes[n].NodePrediction=t.settings.nodeDotPrediction>0&&Math.random()<=t.settings.nodeDotPrediction,e.push(t.nodes[n].targetX)}if(t.settings.node3dRotateAxis==o.MEDIAN_AXIS){e.sort((function(t,e){return t-e}));var n=Math.floor(e.length/2);y=e.length%2?e[n]:Math.floor((e[n-1]+e[n])/2)}else y=t.settings.node3dRotateAxis==o.LEFT_AXIS?0:t.settings.node3dRotateAxis==o.RIGHT_AXIS?t.settings.canvasWidth:t.settings.canvasWidth/2;I++}(),w=!1),c(F&&l?s.EASING_DESCENDING:e,n,g),h&&"function"==typeof h&&h(t)):n>=g+u&&(E=i,w=!0,F=!1)}D=f(d)}function c(e,n,s){R=2*Math.PI/(t.settings.duration*t.settings.animationFps),S=(S+R)%(2*Math.PI),A=Math.sin(a(t.settings.node3dRotatEase,n,R,2*Math.PI,s)),C=Math.cos(a(t.settings.node3dRotatEase,n,R,2*Math.PI,s));for(let o in t.nodes)if(t.nodes[o].currentX=a(e,n,t.nodes[o].startX,t.nodes[o].targetX,s),t.nodes[o].currentY=a(e,n,t.nodes[o].startY,t.nodes[o].targetY,s),t.settings.node3dRotate&&I%t.settings.node3dRotateOnNthNodeMovement==0){let e=y-t.nodes[o].currentX;if(p=-C*e+A*(t.nodes[o].originZ-t.settings.node3dDepthDistance),m=-A*e+C*(t.nodes[o].originZ-t.settings.node3dDepthDistance),t.nodes[o].currentX=p+y,0==t.settings.nodeOverflow){let e=t.settings.canvasHeight-t.settings.nodeDotSize,n=t.settings.canvasWidth-t.settings.nodeDotSize;t.nodes[o].currentX=Math.floor(t.nodes[o].currentX>n?n:t.nodes[o].currentX),t.nodes[o].currentX=Math.floor(t.nodes[o].currentX<t.settings.nodeDotSize?t.settings.nodeDotSize:t.nodes[o].currentX),t.nodes[o].currentY=Math.floor(t.nodes[o].currentY>t.settings.canvasHeight?e:t.nodes[o].currentY),t.nodes[o].currentY=Math.floor(t.nodes[o].currentY<t.settings.nodeDotSize?t.settings.nodeDotSize:t.nodes[o].currentY)}t.nodes[o].zAlpha=1-m/(y/2);let n=t.settings.node3dRotateDepthAlpha;t.nodes[o].zAlpha=t.nodes[o].zAlpha>1?1:t.nodes[o].zAlpha<n?n:t.nodes[o].zAlpha,I=0}}this.isRunning=!1,this.start=function(){this.isRunning||(this.isRunning=!0,g=1e3*i,u=1e3*r,D=f(d))},this.stop=function(){this.isRunning&&(N(D),this.isRunning=!1,M=null,v=-1)};let g,u,A,C,m,p,f=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,N=window.cancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame,M=null,v=-1,D=null,E=null,w=!0,F=!0,S=0,R=2*Math.PI/100,y=0,I=0},this.calculateNewTargetPossition=function(t){return t+(Math.random()<.5?-Math.random():Math.random())*this.m_nodeMovementDistance},this.setAlphaLevel=function(t){let e=Math.sqrt(Math.pow(this.settings.canvasWidth,2)+Math.pow(this.settings.canvasHeight,2)),n=0;for(let e in t.Closest)n+=r(t.Closest[e],t.Closest[(e+1)%t.Closest.length]);let s=1-n/e;t.lineAlpha=s*this.settings.nodeLineAlpha,t.dotAlpha=s*this.settings.nodeDotAlpha,s>.85?(t.fillAlpha=s*this.settings.nodeFillAlpha,t.lineAlpha=this.settings.nodeLineAlpha,t.dotAlpha=this.settings.nodeDotAlpha):s<.8&&s>.7?(t.fillAlpha=.5*s*this.settings.nodeFillAlpha,t.lineAlpha=this.settings.nodeLineAlpha,t.dotAlpha=this.settings.nodeDotAlpha):t.fillAlpha=s<.7&&s>.4?.2*s*this.settings.nodeFillAlpha:0},this.draw=function(t){t.ctx.clearRect(0,0,t.settings.canvasWidth,t.settings.canvasHeight);for(let e in t.nodes)t.drawLines(t,t.nodes[e]),t.drawCircle(t,t.nodes[e])},this.drawLines=function(t,e){if(!(!e.lineAlpha>0&&!e.fillAlpha>0))for(let n in e.Closest){let s=0==e.Closest[n].UnconnectedNode&&0==e.Closest[(n+1)%e.Closest.length].UnconnectedNode,o=1==t.settings.ConnectUnconnectedNodes&&r(e,e.Closest[n])<=t.settings.ConnectUnconnectedNodesDistance;if(s||o){if(e.lineAlpha>0)if(o){let s=1.8*(1-r(e,e.Closest[n])/t.settings.ConnectUnconnectedNodesDistance);s=s>1?1:s,t.drawLineNodeConnection(t,e,n,s)}else t.drawLineNodeConnection(t,e,n,1);t.settings.nodeFillSapce&&e.fillAlpha>0&&s&&t.drawFillNodeConnection(t,e,n)}}},this.drawLineNodeConnection=function(t,e,n,s){t.ctx.beginPath(),t.ctx.moveTo(e.currentX,e.currentY),t.ctx.lineTo(e.Closest[n].currentX,e.Closest[n].currentY),t.ctx.strokeStyle="rgba("+e.nodeLineColor+","+e.lineAlpha*e.zAlpha*s+")",t.ctx.stroke()},this.drawFillNodeConnection=function(t,e,n){if(t.ctx.beginPath(),t.ctx.moveTo(e.currentX,e.currentY),t.ctx.lineTo(e.Closest[n].currentX,e.Closest[n].currentY),t.ctx.lineTo(e.Closest[(n+1)%e.Closest.length].currentX,e.Closest[(n+1)%e.Closest.length].currentY),null!==e.nodeFillGradientColor&&isFinite(e.currentX)&&isFinite(e.currentY)&&isFinite(e.Closest[n].currentX)&&isFinite(e.Closest[n].currentY)){var s=t.ctx.createLinearGradient(e.currentX,e.currentY,e.Closest[n].currentX,e.Closest[n].currentY);s.addColorStop(0,"rgba("+e.nodeFillColor+","+e.fillAlpha*e.zAlpha+")"),s.addColorStop(1,"rgba("+e.nodeFillGradientColor+", "+e.fillAlpha*e.zAlpha+")"),t.ctx.fillStyle=s}else t.ctx.fillStyle="rgba("+e.nodeFillColor+","+e.fillAlpha*e.zAlpha+")";t.ctx.fill()},this.drawCircle=function(t,e){if(!(!e.dotAlpha>0)){if(t.ctx.beginPath(),t.ctx.arc(e.currentX,e.currentY,t.settings.nodeDotSize,0,2*Math.PI,!1),t.ctx.fillStyle="rgba("+e.nodeDotColor+", "+e.dotAlpha*e.zAlpha+")",t.settings.nodeGlowing&&(t.ctx.shadowBlur=10,t.ctx.shadowColor="rgba("+e.nodeDotColor+", "+e.dotAlpha*e.zAlpha+")"),1==e.NodePrediction){let n=t.settings.nodeDotSize*Math.PI,s=n/2;t.ctx.font=n+"px Arial",t.ctx.strokeRect(e.targetX-s,e.targetY-s,n,n),t.ctx.fillText(e.targetX+", "+e.targetY,e.targetX+n,e.targetY-s)}t.ctx.fill()}}}refresh(){this.clear(),this.canvasElement.width=this.settings.canvasWidth,this.canvasElement.height=this.settings.canvasHeight,this.canvasElement.style.position=this.settings.canvasPosition,this.canvasElement.style.top=this.settings.canvasTop,this.canvasElement.style.bottom=this.settings.canvasBottom,this.canvasElement.style.right=this.settings.canvasRight,this.canvasElement.style.left=this.settings.canvasLeft,this.canvasElement.style.zIndex=this.settings.canvasZ,this.setupClusterNodes(),this.animation=new this.Animator(this,this.settings.nodeEase,this.settings.animationFps,this.settings.duration,this.settings.restNodeMovements,this.settings.nodeFancyEntrance,this.draw),this.animation.start()}start(){void 0!==this.animation&&this.animation.start()}stop(){void 0!==this.animation&&this.animation.stop()}clear(){this.stop(),void 0!==this.ctx&&this.ctx.clearRect(0,0,this.settings.canvasWidth,this.settings.canvasHeight)}options(t){if(void 0!==this.$this)for(let e in t)this.settings[e]=t[e]}destroy(){void 0!==this.$this&&(this.clear(),this.$this.removeData("polygonizr"),delete this.$this)}}t.fn.polygonizr=function(n){let s="object"==typeof n&&n;return this.each((function(){let o=t(this),i=o.data("polygonizr");i?s&&i.options(s):(i=new e(o,s),o.data("polygonizr",i)),"string"==typeof n?i[n]():i.refresh()}))},t.fn.polygonizr.defaults={restNodeMovements:0,duration:3,nodeMovementDistance:100,node3dDepthDistance:300,node3dRotate:!1,node3dRotateOnNthNodeMovement:1,node3dRotateDepthAlpha:.1,node3dRotatEase:"linear",node3dRotateAxis:"center",numberOfNodes:20,numberOfUnconnectedNode:35,ConnectUnconnectedNodes:!0,ConnectUnconnectedNodesDistance:250,nodeDotSize:2.5,nodeEase:"easeOut",nodeFancyEntrance:!1,randomizePolygonMeshNetworkFormation:!0,specifyPolygonMeshNetworkFormation:null,nodeRelations:3,animationFps:30,nodeDotColor:"200, 200, 200",nodeDotColoringSchema:"linear",nodeLineColor:"150, 150, 150",nodeLineColoringSchema:"linear",nodeFillColor:"100, 100, 100",nodeFillColoringSchema:"linear",nodeFillGradientColor:null,nodeFillGradientColoringSchema:"linear",nodeFillAlpha:.5,nodeLineAlpha:.5,nodeDotAlpha:1,nodeDotPrediction:0,nodeFillSapce:!0,nodeOverflow:!0,nodeGlowing:!1,canvasWidth:t(this).width(),canvasHeight:t(this).height(),canvasPosition:"absolute",canvasTop:"auto",canvasBottom:"auto",canvasRight:"auto",canvasLeft:"auto",canvasZ:"auto"}}(jQuery);
//# sourceMappingURL=polygonizr.min.min.js.map